function GraphicObj(a,b){function f(a){for(var b=a.pointsPzt,c=a.imgUrl,e=a.scale,f=a.x,g=a.y,h=0;h<b.length;h++){var i=new Raster({source:c,position:[b[h].x,b[h].y]});i.scale(e),d.push(i)}var j=new Group(d);j.position=[f,g]}if(void 0!==GraphicObj.unique)return GraphicObj.unique;var c;c=a.getContext("2d"),a.width=b.width();var d=[];this.circleHandler=function(a){var b=a.x,c=a.y,d=a.r,e=a.num,g=a.imgUrl,h=a.scale,i=a.sDeg;if(!(0==b.length||isNaN(b)||0==c.length||isNaN(c)||0==d.length||isNaN(d)||0==e.length||isNaN(e))){var j=new Locus,k={x:b,y:c,r:d,num:e,sDeg:i},l=j.getByCircle(k),m={pointsPzt:l,imgUrl:g,scale:h,x:b,y:c};f(m)}},this.saveImg=function(){var b=a.toDataURL();window.open(b)},this.getObjList=function(){for(var a=0;a<d.length;a++)console.log(d[a])},this.removerAllGraphics=function(){c.clearRect(0,0,a.width,b.height());for(var e=0;e<d.length;e++)d[e].remove();d.length=0}}$(document).ready(function(){function g(){b=document.getElementById("canvas"),c=$("#canvasWrap"),d="template/images/logo.png",f=new GraphicObj(b,c);try{document.createElement("canvas").getContext("2d")}catch(a){document.body.innerHTML="\u8bf7\u66f4\u6362chrome\u6700\u65b0\u7248\u7684\u6d4f\u89c8\u5668\uff01\u4f60\u76ee\u524d\u7684\u6d4f\u89c8\u5668\u592a\u843d\u4f0d\u4e86\uff01"}}function h(){f.removerAllGraphics()}function i(){var a=parseInt($("#x").val()),b=parseInt($("#y").val()),c=parseInt($("#r").val()),e=parseInt($("#btnNum").val()),g=parseFloat($("#btnScale").val()),i=parseFloat($("#btnDegree").val()),j={x:a,y:b,r:c,num:e,imgUrl:d,scale:g,sDeg:i};h(),f.circleHandler(j)}var b,c,d,f,e=!0;g(),$("#btnCreatCircle").on("click",function(){e?($("#ctlCreateCircle").fadeIn("fast"),$(this).text("\u5173\u95ed\u5706\u5f62\u56fe\u6848\u521b\u5efa\u9762\u677f"),i()):($("#ctlCreateCircle").fadeOut("fast"),$(this).text("\u6253\u5f00\u5706\u5f62\u56fe\u6848\u521b\u5efa\u9762\u677f"),h()),e=!e}),$("#btnScale").on("mouseup",function(){$("#showScale").text($(this).val()),i()}),$("#x").on("mouseup",function(){$("#showX").text($(this).val()),i()}),$("#y").on("mouseup",function(){$("#showY").text($(this).val()),i()}),$("#r").on("mouseup",function(){$("#showR").text($(this).val()),i()}),$("#btnNum").on("mouseup",function(){$("#showNum").text($(this).val()),i()}),$("#btnDegree").on("mouseup",function(){$("#showDegree").text($(this).val()),i()}),$("#btnCreatCircleAction").on("click",function(){i()}),$("#btnClearCircleAction").on("click",function(){h()}),$("#btnSaveCircleAction").on("click",function(){f.saveImg()})});